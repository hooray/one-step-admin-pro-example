
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang-ChZ28WVx.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-DjF5febJ.js";import{e as S,f as P,D as U,G as A,E as I,r as i,W as H,A as N,u as a,o as g,c as L,a as o,w as l,m as F,n as ae,p as ne,h as C,y as V,b as m,s as T,aG as se,t as ie,aH as re,_ as de}from"./index-mFYeOg6f.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-Buj60MwG.js";import{a as M}from"./department-DVt24mP8.js";import{u as me}from"./usePagination-Bo0a2Msc.js";import{u as pe}from"./useWindow-_VulymEv.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G=S({__name:"index",props:{id:{default:""}},setup(h,{expose:p}){const v=h,E=P(!1),f=U("formRef"),r=P({id:v.id,title:""}),k=P({title:[{required:!0,message:"请输入部门名称",trigger:"blur"}]});A(()=>{r.value.id!==""&&t()});function t(){E.value=!0,M.detail(r.value.id).then(s=>{E.value=!1,r.value.title=s.data.title})}return p({submit(){return new Promise(s=>{var u;(u=f.value)==null||u.validate(n=>{n&&(r.value.id===""?M.create(r.value).then(()=>{I.success({message:"模拟新增成功",center:!0}),s()}):M.edit(r.value).then(()=>{I.success({message:"模拟编辑成功",center:!0}),s()}))})})}}),(s,u)=>{const n=i("ElInput"),b=i("ElFormItem"),z=i("ElForm"),w=H("loading");return N((g(),L("div",null,[o(z,{ref_key:"formRef",ref:f,model:a(r),rules:a(k),"label-width":"120px","label-suffix":"："},{default:l(()=>[o(b,{label:"部门",prop:"title"},{default:l(()=>[o(n,{modelValue:a(r).title,"onUpdate:modelValue":u[0]||(u[0]=y=>a(r).title=y),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[w,a(E)]])}}}),ce=S({__name:"index",props:F({mode:{},id:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:F(["success"],["update:modelValue"]),setup(h,{emit:p}){const v=h,E=p,f=ae(h,"modelValue"),r=U("formRef"),k=ne(()=>v.id===""?"新增部门":"编辑部门");function t(){var u;(u=r.value)==null||u.submit().then(()=>{E("success"),s()})}function s(){f.value=!1}return(u,n)=>{const b=i("ElButton"),z=i("ElDialog"),w=i("ElDrawer");return g(),L("div",null,[v.mode==="dialog"?(g(),C(z,{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=y=>f.value=y),title:a(k),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:l(()=>[o(b,{size:"large",onClick:s},{default:l(()=>n[2]||(n[2]=[m(" 取消 ")])),_:1}),o(b,{type:"primary",size:"large",onClick:t},{default:l(()=>n[3]||(n[3]=[m(" 确定 ")])),_:1})]),default:l(()=>[o(G,T({ref_key:"formRef",ref:r},u.$props),null,16)]),_:1},8,["modelValue","title"])):v.mode==="drawer"?(g(),C(w,{key:1,modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=y=>f.value=y),title:a(k),size:"600px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[o(b,{size:"large",onClick:s},{default:l(()=>n[4]||(n[4]=[m(" 取消 ")])),_:1}),o(b,{type:"primary",size:"large",onClick:t},{default:l(()=>n[5]||(n[5]=[m(" 确定 ")])),_:1})]),default:l(()=>[o(G,T({ref_key:"formRef",ref:r},u.$props),null,16)]),_:1},8,["modelValue","title"])):V("",!0)])}}}),ge=S({__name:"index",setup(h){const{pagination:p,getParams:v,onSizeChange:E,onCurrentChange:f,onSortChange:r}=me(),k=pe(),t=P({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});A(()=>{s()});function s(){t.value.loading=!0;const d={...v(),...t.value.search.title&&{title:t.value.search.title}};M.list(d).then(e=>{t.value.loading=!1,t.value.dataList=e.data.list,p.value.total=e.data.total})}function u(d){E(d).then(()=>s())}function n(d=1){f(d).then(()=>s())}function b({prop:d,order:e}){r(d,e).then(()=>s())}function z(){t.value.formModeProps.id="",t.value.formModeProps.visible=!0}function w(d){t.value.formModeProps.id=d.id,t.value.formModeProps.visible=!0}function y(d){re.confirm(`确认删除「${d.title}」吗？`,"确认信息").then(()=>{M.delete(d.id).then(()=>{s(),I.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}function J(d){k.add({title:"职位管理",name:"PagesExampleGeneralDepartmentJob",params:{department_id:d.id}})}return(d,e)=>{const K=ue,W=i("ElInput"),R=i("ElFormItem"),$=de,_=i("ElButton"),q=i("ElForm"),j=le,O=i("ElDivider"),Q=i("ElButtonGroup"),X=i("ElSpace"),B=i("ElTableColumn"),Y=i("ElTable"),Z=i("ElPagination"),ee=oe,te=H("loading");return g(),L("div",null,[o(K,{title:"部门管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),o(ee,null,{default:l(()=>[o(j,{"show-toggle":!1},{default:l(({fold:c,toggle:D})=>[o(q,{model:a(t).search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[o(R,{label:"部门"},{default:l(()=>[o(W,{modelValue:a(t).search.title,"onUpdate:modelValue":e[0]||(e[0]=x=>a(t).search.title=x),placeholder:"请输入部门，支持模糊查询",clearable:"",onKeydown:e[1]||(e[1]=se(x=>n(),["enter"])),onClear:e[2]||(e[2]=x=>n())},null,8,["modelValue"])]),_:1}),o(R,null,{default:l(()=>[o(_,{type:"primary",onClick:e[3]||(e[3]=x=>n())},{icon:l(()=>[o($,{name:"i-ep:search"})]),default:l(()=>[e[6]||(e[6]=m(" 筛选 "))]),_:1}),o(_,{link:"",disabled:"",onClick:D},{icon:l(()=>[o($,{name:c?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[m(" "+ie(c?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),o(O,{"border-style":"dashed"}),o(X,{wrap:""},{default:l(()=>[o(_,{type:"primary",size:"default",onClick:z},{icon:l(()=>[o($,{name:"i-ep:plus"})]),default:l(()=>[e[7]||(e[7]=m(" 新增部门 "))]),_:1}),a(t).batch.enable?(g(),C(_,{key:0,size:"default",disabled:!a(t).batch.selectionDataList.length},{default:l(()=>e[8]||(e[8]=[m(" 单个批量操作按钮 ")])),_:1},8,["disabled"])):V("",!0),a(t).batch.enable?(g(),C(Q,{key:1},{default:l(()=>[o(_,{size:"default",disabled:!a(t).batch.selectionDataList.length},{default:l(()=>e[9]||(e[9]=[m(" 批量操作按钮组1 ")])),_:1},8,["disabled"]),o(_,{size:"default",disabled:!a(t).batch.selectionDataList.length},{default:l(()=>e[10]||(e[10]=[m(" 批量操作按钮组2 ")])),_:1},8,["disabled"])]),_:1})):V("",!0)]),_:1}),N((g(),C(Y,{class:"my-4",data:a(t).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:b,onSelectionChange:e[4]||(e[4]=c=>a(t).batch.selectionDataList=c)},{default:l(()=>[a(t).batch.enable?(g(),C(B,{key:0,type:"selection",width:"40"})):V("",!0),o(B,{prop:"title",label:"部门"}),o(B,{label:"操作",width:"250",align:"center"},{default:l(c=>[o(_,{type:"info",size:"small",plain:"",onClick:D=>J(c.row)},{default:l(()=>e[11]||(e[11]=[m(" 查看职位 ")])),_:2},1032,["onClick"]),o(_,{type:"primary",size:"small",plain:"",onClick:D=>w(c.row)},{default:l(()=>e[12]||(e[12]=[m(" 编辑 ")])),_:2},1032,["onClick"]),o(_,{type:"danger",size:"small",plain:"",onClick:D=>y(c.row)},{default:l(()=>e[13]||(e[13]=[m(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[te,a(t).loading]]),o(Z,{"current-page":a(p).page,total:a(p).total,"page-size":a(p).size,"page-sizes":a(p).sizes,layout:a(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:u,onCurrentChange:n},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),a(t).formMode==="dialog"||a(t).formMode==="drawer"?(g(),C(ce,{key:0,id:a(t).formModeProps.id,modelValue:a(t).formModeProps.visible,"onUpdate:modelValue":e[5]||(e[5]=c=>a(t).formModeProps.visible=c),mode:a(t).formMode,onSuccess:s},null,8,["id","modelValue","mode"])):V("",!0)])}}}),ze=fe(ge,[["__scopeId","data-v-0776cbd1"]]);export{ze as default};
