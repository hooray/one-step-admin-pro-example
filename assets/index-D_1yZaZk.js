
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{p as g,f as S,as as W,at as T,K as R,au as M,av as E,aw as H,ax as k,ay as I,az as A,G as L,aA as P,aB as V,aC as D}from"./index-mFYeOg6f.js";const _=k?window:void 0,G=k?window.document:void 0,O=k?window.navigator:void 0;function b(o){var l;const e=E(o);return(l=e==null?void 0:e.$el)!=null?l:e}function x(...o){let l,e,v,s;if(typeof o[0]=="string"||Array.isArray(o[0])?([e,v,s]=o,l=_):[l,e,v,s]=o,!l)return T;Array.isArray(e)||(e=[e]),Array.isArray(v)||(v=[v]);const u=[],i=()=>{u.forEach(a=>a()),u.length=0},r=(a,t,c,f)=>(a.addEventListener(t,c,f),()=>a.removeEventListener(t,c,f)),d=R(()=>[b(l),E(s)],([a,t])=>{if(i(),!a)return;const c=I(t)?{...t}:t;u.push(...e.flatMap(f=>v.map(w=>r(a,f,w,c))))},{immediate:!0,flush:"post"}),p=()=>{d(),i()};return A(p),p}function $(){const o=S(!1),l=V();return l&&L(()=>{o.value=!0},l),o}function C(o){const l=$();return g(()=>(l.value,!!o()))}function q(o,l={}){const{controls:e=!1,navigator:v=O}=l,s=C(()=>v&&"permissions"in v),u=M(),i=typeof o=="string"?{name:o}:o,r=M(),d=()=>{var a,t;r.value=(t=(a=u.value)==null?void 0:a.state)!=null?t:"prompt"};x(u,"change",d);const p=P(async()=>{if(s.value){if(!u.value)try{u.value=await v.permissions.query(i)}catch{u.value=void 0}finally{d()}if(e)return D(u.value)}});return p(),e?{state:r,isSupported:s,query:p}:r}function N(o={}){const{navigator:l=O,read:e=!1,source:v,copiedDuring:s=1500,legacy:u=!1}=o,i=C(()=>l&&"clipboard"in l),r=q("clipboard-read"),d=q("clipboard-write"),p=g(()=>i.value||u),a=S(""),t=S(!1),c=W(()=>t.value=!1,s);function f(){i.value&&n(r.value)?l.clipboard.readText().then(m=>{a.value=m}):a.value=F()}p.value&&e&&x(["copy","cut"],f);async function w(m=E(v)){p.value&&m!=null&&(i.value&&n(d.value)?await l.clipboard.writeText(m):y(m),a.value=m,t.value=!0,c.start())}function y(m){const h=document.createElement("textarea");h.value=m??"",h.style.position="absolute",h.style.opacity="0",document.body.appendChild(h),h.select(),document.execCommand("copy"),h.remove()}function F(){var m,h,z;return(z=(h=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:h.toString())!=null?z:""}function n(m){return m==="granted"||m==="prompt"}return{isSupported:p,text:a,copied:t,copy:w}}function j(o,l,e={}){const{window:v=_,...s}=e;let u;const i=C(()=>v&&"ResizeObserver"in v),r=()=>{u&&(u.disconnect(),u=void 0)},d=g(()=>{const t=E(o);return Array.isArray(t)?t.map(c=>b(c)):[b(t)]}),p=R(d,t=>{if(r(),i.value&&v){u=new ResizeObserver(l);for(const c of t)c&&u.observe(c,s)}},{immediate:!0,flush:"post"}),a=()=>{r(),p()};return A(a),{isSupported:i,stop:a}}function U(o,l={width:0,height:0},e={}){const{window:v=_,box:s="content-box"}=e,u=g(()=>{var t,c;return(c=(t=b(o))==null?void 0:t.namespaceURI)==null?void 0:c.includes("svg")}),i=S(l.width),r=S(l.height),{stop:d}=j(o,([t])=>{const c=s==="border-box"?t.borderBoxSize:s==="content-box"?t.contentBoxSize:t.devicePixelContentBoxSize;if(v&&u.value){const f=b(o);if(f){const w=f.getBoundingClientRect();i.value=w.width,r.value=w.height}}else if(c){const f=Array.isArray(c)?c:[c];i.value=f.reduce((w,{inlineSize:y})=>w+y,0),r.value=f.reduce((w,{blockSize:y})=>w+y,0)}else i.value=t.contentRect.width,r.value=t.contentRect.height},e);H(()=>{const t=b(o);t&&(i.value="offsetWidth"in t?t.offsetWidth:l.width,r.value="offsetHeight"in t?t.offsetHeight:l.height)});const p=R(()=>b(o),t=>{i.value=t?l.width:0,r.value=t?l.height:0});function a(){d(),p()}return{width:i,height:r,stop:a}}const B=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function J(o,l={}){const{document:e=G,autoExit:v=!1}=l,s=g(()=>{var n;return(n=b(o))!=null?n:e==null?void 0:e.querySelector("html")}),u=S(!1),i=g(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(n=>e&&n in e||s.value&&n in s.value)),r=g(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(n=>e&&n in e||s.value&&n in s.value)),d=g(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(n=>e&&n in e||s.value&&n in s.value)),p=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(n=>e&&n in e),a=C(()=>s.value&&e&&i.value!==void 0&&r.value!==void 0&&d.value!==void 0),t=()=>p?(e==null?void 0:e[p])===s.value:!1,c=()=>{if(d.value){if(e&&e[d.value]!=null)return e[d.value];{const n=s.value;if((n==null?void 0:n[d.value])!=null)return!!n[d.value]}}return!1};async function f(){if(!(!a.value||!u.value)){if(r.value)if((e==null?void 0:e[r.value])!=null)await e[r.value]();else{const n=s.value;(n==null?void 0:n[r.value])!=null&&await n[r.value]()}u.value=!1}}async function w(){if(!a.value||u.value)return;c()&&await f();const n=s.value;i.value&&(n==null?void 0:n[i.value])!=null&&(await n[i.value](),u.value=!0)}async function y(){await(u.value?f():w())}const F=()=>{const n=c();(!n||n&&t())&&(u.value=n)};return x(e,B,F,!1),x(()=>b(s),B,F,!1),v&&A(f),{isSupported:a,isFullscreen:u,enter:w,exit:f,toggle:y}}export{J as a,U as b,N as u};
