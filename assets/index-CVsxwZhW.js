
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{_ as y}from"./index.vue_vue_type_script_setup_true_lang-Bervnd7v.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-Buj60MwG.js";import{e as v,I as x,D as C,f as i,o as I,c as q,a as o,w as r,aK as B,aL as F,r as l,b as U,u as t,E as P}from"./index-mFYeOg6f.js";const z=v({__name:"index",setup(S){const f=B(),w=F(),m=x(),c=C("formRef"),s=i({password:"",newpassword:"",checkpassword:""}),_=i({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(n,e,u)=>{e!==s.value.newpassword?u(new Error("请确认新密码")):u()}}]});function g(){var n;(n=c.value)==null||n.validate(e=>{e&&m.editPassword(s.value).then(()=>{P({type:"success",message:"模拟修改成功，请重新登录"}),m.logout().then(()=>{w.push({name:"login",query:{redirect:f.fullPath}})})}).catch(()=>{})})}return(n,e)=>{const u=R,d=l("ElInput"),p=l("ElFormItem"),E=l("ElForm"),V=l("ElCol"),b=l("ElRow"),h=l("ElButton"),k=y;return I(),q("div",null,[o(k,null,{action:r(()=>[o(h,{type:"primary",size:"small",onClick:g},{default:r(()=>e[3]||(e[3]=[U(" 提交 ")])),_:1})]),default:r(()=>[o(u,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),o(b,null,{default:r(()=>[o(V,{md:24,lg:12},{default:r(()=>[o(E,{ref_key:"formRef",ref:c,model:t(s),rules:t(_),"label-width":"120px"},{default:r(()=>[o(p,{label:"原密码",prop:"password"},{default:r(()=>[o(d,{modelValue:t(s).password,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).password=a),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),o(p,{label:"新密码",prop:"newpassword"},{default:r(()=>[o(d,{modelValue:t(s).newpassword,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).newpassword=a),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),o(p,{label:"确认新密码",prop:"checkpassword"},{default:r(()=>[o(d,{modelValue:t(s).checkpassword,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).checkpassword=a),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})])}}});export{z as default};
