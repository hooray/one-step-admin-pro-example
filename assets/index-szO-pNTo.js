
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{_ as D}from"./index.vue_vue_type_script_setup_true_lang-ChZ28WVx.js";import{e as V,x as A,aJ as _,N as P,I as T,o as u,h as M,w as s,r as d,W as U,u as g,c as p,d as t,a as o,t as j,A as k,b as n,E as y}from"./index-mFYeOg6f.js";const I=V({name:"Auth",__name:"index",props:{value:{},all:{type:Boolean}},setup(C){const l=C,f=_();function E(){return l.all?f.authAll(typeof l.value=="string"?[l.value]:l.value):f.auth(l.value)}return(i,x)=>E()?A(i.$slots,"default",{key:0}):A(i.$slots,"no-auth",{key:1})}}),J={key:0},W={key:1},q={class:"flex-col-start gap-2"},H=V({__name:"index",setup(C){const{auth:l,authAll:f}=_(),E=P(),i=T();async function x(a){await i.login({account:a,password:""}),await i.getPermissions()}function B(a){l(a)?y.success("校验通过"):y.error("校验不通过")}function G(a){f(a)?y.success("校验通过"):y.error("校验不通过")}return(a,e)=>{const $=d("ElRadioButton"),N=d("ElRadioGroup"),r=d("ElTag"),v=I,b=d("ElButton"),S=d("ElButtonGroup"),R=D,w=U("auth");return u(),M(R,null,{default:s(()=>[g(E).settings.app.enablePermission?(u(),p("div",W,[e[21]||(e[21]=t("h3",null,"切换帐号",-1)),o(N,{modelValue:g(i).account,"onUpdate:modelValue":e[0]||(e[0]=m=>g(i).account=m),onChange:x},{default:s(()=>[o($,{label:"admin"}),o($,{label:"test"})]),_:1},8,["modelValue"]),e[22]||(e[22]=t("h3",null,"帐号权限",-1)),t("div",null,j(g(i).permissions),1),e[23]||(e[23]=t("h3",null,"鉴权指令（请对照代码查看）",-1)),t("div",null,[k((u(),p("div",null,e[5]||(e[5]=[n(" 如果你有 permission.browse 权限则能看到这句话 ")]))),[[w,"permission.browse"]]),k((u(),p("div",null,e[6]||(e[6]=[n(" 如果你有 permission.create 权限则能看到这句话 ")]))),[[w,"permission.create"]]),k((u(),p("div",null,e[7]||(e[7]=[n(" 如果你有 permission.browse 或 permission.create 权限则能看到这句话 ")]))),[[w,["permission.browse","permission.create"]]]),k((u(),p("div",null,e[8]||(e[8]=[n(" 如果你有 permission.browse 和 permission.create 权限则能看到这句话 ")]))),[[w,["permission.browse","permission.create"],void 0,{all:!0}]])]),e[24]||(e[24]=t("h3",null,"鉴权组件（请对照代码查看）",-1)),t("div",q,[o(v,{value:"permission.browse"},{"no-auth":s(()=>[o(r,{type:"danger"},{default:s(()=>e[10]||(e[10]=[n(" 你没有 permission.browse 权限 ")])),_:1})]),default:s(()=>[o(r,null,{default:s(()=>e[9]||(e[9]=[n("你有 permission.browse 权限")])),_:1})]),_:1}),o(v,{value:"permission.create"},{"no-auth":s(()=>[o(r,{type:"danger"},{default:s(()=>e[12]||(e[12]=[n(" 你没有 permission.create 权限 ")])),_:1})]),default:s(()=>[o(r,null,{default:s(()=>e[11]||(e[11]=[n("你有 permission.create 权限")])),_:1})]),_:1}),o(v,{value:["permission.browse","permission.create"]},{"no-auth":s(()=>[o(r,{type:"danger"},{default:s(()=>e[14]||(e[14]=[n(" 你没有 permission.browse 或 permission.create 权限 ")])),_:1})]),default:s(()=>[o(r,null,{default:s(()=>e[13]||(e[13]=[n("你有 permission.browse 或 permission.create 权限")])),_:1})]),_:1}),o(v,{value:["permission.browse","permission.create"],all:""},{"no-auth":s(()=>[o(r,{type:"danger"},{default:s(()=>e[16]||(e[16]=[n(" 你没有 permission.browse 和 permission.create 权限 ")])),_:1})]),default:s(()=>[o(r,null,{default:s(()=>e[15]||(e[15]=[n("你有 permission.browse 和 permission.create 权限")])),_:1})]),_:1})]),e[25]||(e[25]=t("h3",null,"鉴权函数（请对照代码查看）",-1)),t("div",null,[o(S,{style:{display:"block","margin-bottom":"10px"}},{default:s(()=>[o(b,{onClick:e[1]||(e[1]=m=>B("permission.browse"))},{default:s(()=>e[17]||(e[17]=[n(" 校验 permission.browse 权限 ")])),_:1}),o(b,{onClick:e[2]||(e[2]=m=>B("permission.create"))},{default:s(()=>e[18]||(e[18]=[n(" 校验 permission.create 权限 ")])),_:1})]),_:1}),o(S,null,{default:s(()=>[o(b,{onClick:e[3]||(e[3]=m=>B(["permission.browse","permission.create"]))},{default:s(()=>e[19]||(e[19]=[n(" 校验 permission.browse 或 permission.create 权限 ")])),_:1}),o(b,{onClick:e[4]||(e[4]=m=>G(["permission.browse","permission.create"]))},{default:s(()=>e[20]||(e[20]=[n(" 校验 permission.browse 和 permission.create 权限 ")])),_:1})]),_:1})])])):(u(),p("div",J," 请到 seeting.js 里打开权限功能，再进入该页面查看演示 "))]),_:1})}}});export{H as default};
