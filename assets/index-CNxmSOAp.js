
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{_ as C}from"./index.vue_vue_type_script_setup_true_lang-ChZ28WVx.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-Buj60MwG.js";import{e as F,f as c,p as T,o as f,c as z,a,w as m,r,u as n,b as g,t as E,F as U,g as y,h as I}from"./index-mFYeOg6f.js";const N=F({__name:"index",setup(B){const u=c([{name:"站点管理",module:"station",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"}]},{name:"部门管理",module:"department",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"职位管理",module:"department_job",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"新增",module:"new"},{name:"编辑",module:"edit"},{name:"删除",module:"delete"}]},{name:"角色管理",module:"role",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"删除",module:"delete"},{name:"编辑",module:"edit"},{name:"新增",module:"new"}]},{name:"管理员管理",module:"admin_manager",authorization_list:[{name:"查看列表",module:"list"},{name:"查看详情",module:"info"},{name:"编辑权限",module:"authorization_edit"},{name:"查看权限详情",module:"authorization_info"},{name:"删除",module:"delete"},{name:"停用",module:"disabled"},{name:"编辑",module:"edit"},{name:"启用",module:"enable"},{name:"新增",module:"new"},{name:"重置密码",module:"reset"}]}]),t=c({name:"",brief:"",authorization_list:[]}),$=c({name:[{required:!0,message:"请输入名称",trigger:"blur"}],authorization_list:[{validator:(s,e,l)=>{e.length===0?l(new Error("至少选择一个权限")):l()},trigger:"change"}]}),_=T(()=>{const s=[];return u.value.forEach(e=>{const l=[];e.authorization_list.forEach(d=>{t.value.authorization_list.includes(`${e.module}.${d.module}`)&&l.push(`${e.module}.${d.module}`)}),s.push({checkAll:l.length===e.authorization_list.length,indeterminate:l.length>0&&l.length<e.authorization_list.length})}),s});function w(s,e){s?u.value[e].authorization_list.forEach(l=>{t.value.authorization_list.includes(`${u.value[e].module}.${l.module}`)||t.value.authorization_list.push(`${u.value[e].module}.${l.module}`)}):u.value[e].authorization_list.forEach(l=>{t.value.authorization_list=t.value.authorization_list.filter(d=>d!==`${u.value[e].module}.${l.module}`)})}return(s,e)=>{const l=A,d=r("ElInput"),h=r("ElFormItem"),p=r("ElCheckbox"),b=r("ElTableColumn"),V=r("ElCheckboxGroup"),v=r("ElTable"),k=r("ElForm"),x=C;return f(),z("div",null,[a(l,{title:"权限",content:"该页面生成的权限格式，可直接用于本项目的权限模式"}),a(x,null,{default:m(()=>[a(k,{model:n(t),rules:n($),"label-width":"120px","label-suffix":"："},{default:m(()=>[a(h,{label:"名称",prop:"name"},{default:m(()=>[a(d,{modelValue:n(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>n(t).name=o),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),a(h,{label:"简介"},{default:m(()=>[a(d,{modelValue:n(t).brief,"onUpdate:modelValue":e[1]||(e[1]=o=>n(t).brief=o),type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入角色简介"},null,8,["modelValue"])]),_:1}),a(h,{label:"权限",prop:"authorization_list"},{default:m(()=>[a(v,{data:n(u),stripe:"","highlight-current-row":"",border:"",style:{lineHeight:"normal"}},{default:m(()=>[a(b,{prop:"name",width:"200",label:"模块"},{default:m(o=>[a(p,{modelValue:n(_)[o.$index].checkAll,"onUpdate:modelValue":i=>n(_)[o.$index].checkAll=i,indeterminate:n(_)[o.$index].indeterminate,onChange:i=>w(i,o.$index)},{default:m(()=>[g(E(o.row.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onChange"])]),_:1}),a(b,{label:"权限"},{default:m(o=>[a(V,{modelValue:n(t).authorization_list,"onUpdate:modelValue":e[2]||(e[2]=i=>n(t).authorization_list=i)},{default:m(()=>[(f(!0),z(U,null,y(o.row.authorization_list,i=>(f(),I(p,{key:`${o.row.module}.${i.module}`,label:`${o.row.module}.${i.module}`},{default:m(()=>[g(E(i.name),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}});export{N as default};
