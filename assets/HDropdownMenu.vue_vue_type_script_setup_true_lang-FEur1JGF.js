
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{f as w,G as N,aa as K,$ as v,e as P,a0 as G,a3 as ee,a1 as te,p as m,ab as C,ac as R,K as Y,a4 as z,a5 as ae,F as V,Y as le,ad as ne,Z,ae as M,a6 as y,af as L,ag as re,ah as se,ai as $,aj as I,m as U,n as ue,o as T,h as D,w as O,u as E,a as oe,c as F,g as q,d as ie,y as de,b as ce,t as J,q as ve,_ as pe,s as fe,r as be,x as me}from"./index-mFYeOg6f.js";function W(e,u){if(e)return e;let r=u??"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function xe(e,u){let r=w(W(e.value.type,e.value.as));return N(()=>{r.value=W(e.value.type,e.value.as)}),K(()=>{var s;r.value||v(u)&&v(u)instanceof HTMLButtonElement&&!((s=v(u))!=null&&s.hasAttribute("type"))&&(r.value="button")}),r}let ge=P({props:{onFocus:{type:Function,required:!0}},setup(e){let u=w(!0);return()=>u.value?G(te,{as:"button",type:"button",features:ee.Focusable,onFocus(r){r.preventDefault();let s,p=50;function o(){var l;if(p--<=0){s&&cancelAnimationFrame(s);return}if((l=e.onFocus)!=null&&l.call(e)){u.value=!1,cancelAnimationFrame(s);return}s=requestAnimationFrame(o)}s=requestAnimationFrame(o)}}):null}});var he=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(he||{}),ye=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ye||{});let Q=Symbol("TabsContext");function H(e){let u=Z(Q,null);if(u===null){let r=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,H),r}return u}let X=Symbol("TabsSSRContext"),Ie=P({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:u,attrs:r,emit:s}){var p;let o=w((p=e.selectedIndex)!=null?p:e.defaultIndex),l=w([]),n=w([]),b=m(()=>e.selectedIndex!==null),k=m(()=>b.value?e.selectedIndex:o.value);function h(a){var i;let c=C(d.tabs.value,v),t=C(d.panels.value,v),f=c.filter(x=>{var g;return!((g=v(x))!=null&&g.hasAttribute("disabled"))});if(a<0||a>c.length-1){let x=M(o.value===null?0:Math.sign(a-o.value),{[-1]:()=>1,0:()=>M(Math.sign(a),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),g=M(x,{0:()=>c.indexOf(f[0]),1:()=>c.indexOf(f[f.length-1])});g!==-1&&(o.value=g),d.tabs.value=c,d.panels.value=t}else{let x=c.slice(0,a),g=[...c.slice(a),...x].find(j=>f.includes(j));if(!g)return;let _=(i=c.indexOf(g))!=null?i:d.selectedIndex.value;_===-1&&(_=d.selectedIndex.value),o.value=_,d.tabs.value=c,d.panels.value=t}}let d={selectedIndex:m(()=>{var a,i;return(i=(a=o.value)!=null?a:e.defaultIndex)!=null?i:null}),orientation:m(()=>e.vertical?"vertical":"horizontal"),activation:m(()=>e.manual?"manual":"auto"),tabs:l,panels:n,setSelectedIndex(a){k.value!==a&&s("change",a),b.value||h(a)},registerTab(a){var i;if(l.value.includes(a))return;let c=l.value[o.value];if(l.value.push(a),l.value=C(l.value,v),!b.value){let t=(i=l.value.indexOf(c))!=null?i:o.value;t!==-1&&(o.value=t)}},unregisterTab(a){let i=l.value.indexOf(a);i!==-1&&l.value.splice(i,1)},registerPanel(a){n.value.includes(a)||(n.value.push(a),n.value=C(n.value,v))},unregisterPanel(a){let i=n.value.indexOf(a);i!==-1&&n.value.splice(i,1)}};R(Q,d);let S=w({tabs:[],panels:[]}),B=w(!1);N(()=>{B.value=!0}),R(X,m(()=>B.value?null:S.value));let A=m(()=>e.selectedIndex);return N(()=>{Y([A],()=>{var a;return h((a=e.selectedIndex)!=null?a:e.defaultIndex)},{immediate:!0})}),K(()=>{if(!b.value||k.value==null||d.tabs.value.length<=0)return;let a=C(d.tabs.value,v);a.some((i,c)=>v(d.tabs.value[c])!==v(i))&&d.setSelectedIndex(a.findIndex(i=>v(i)===v(d.tabs.value[k.value])))}),()=>{let a={selectedIndex:o.value};return G(V,[l.value.length<=0&&G(ge,{onFocus:()=>{for(let i of l.value){let c=v(i);if((c==null?void 0:c.tabIndex)===0)return c.focus(),!0}return!1}}),z({theirProps:{...r,...ae(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:a,slots:u,attrs:r,name:"TabGroup"})])}}}),ke=P({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:u,slots:r}){let s=H("TabList");return()=>{let p={selectedIndex:s.selectedIndex.value},o={role:"tablist","aria-orientation":s.orientation.value};return z({ourProps:o,theirProps:e,slot:p,attrs:u,slots:r,name:"TabList"})}}}),we=P({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:u,slots:r,expose:s}){var p;let o=(p=e.id)!=null?p:`headlessui-tabs-tab-${le()}`,l=H("Tab"),n=w(null);s({el:n,$el:n}),N(()=>l.registerTab(n)),ne(()=>l.unregisterTab(n));let b=Z(X),k=m(()=>{if(b.value){let t=b.value.tabs.indexOf(o);return t===-1?b.value.tabs.push(o)-1:t}return-1}),h=m(()=>{let t=l.tabs.value.indexOf(n);return t===-1?k.value:t}),d=m(()=>h.value===l.selectedIndex.value);function S(t){var f;let x=t();if(x===L.Success&&l.activation.value==="auto"){let g=(f=se(n))==null?void 0:f.activeElement,_=l.tabs.value.findIndex(j=>v(j)===g);_!==-1&&l.setSelectedIndex(_)}return x}function B(t){let f=l.tabs.value.map(x=>v(x)).filter(Boolean);if(t.key===y.Space||t.key===y.Enter){t.preventDefault(),t.stopPropagation(),l.setSelectedIndex(h.value);return}switch(t.key){case y.Home:case y.PageUp:return t.preventDefault(),t.stopPropagation(),S(()=>$(f,I.First));case y.End:case y.PageDown:return t.preventDefault(),t.stopPropagation(),S(()=>$(f,I.Last))}if(S(()=>M(l.orientation.value,{vertical(){return t.key===y.ArrowUp?$(f,I.Previous|I.WrapAround):t.key===y.ArrowDown?$(f,I.Next|I.WrapAround):L.Error},horizontal(){return t.key===y.ArrowLeft?$(f,I.Previous|I.WrapAround):t.key===y.ArrowRight?$(f,I.Next|I.WrapAround):L.Error}}))===L.Success)return t.preventDefault()}let A=w(!1);function a(){var t;A.value||(A.value=!0,!e.disabled&&((t=v(n))==null||t.focus({preventScroll:!0}),l.setSelectedIndex(h.value),re(()=>{A.value=!1})))}function i(t){t.preventDefault()}let c=xe(m(()=>({as:e.as,type:u.type})),n);return()=>{var t,f;let x={selected:d.value,disabled:(t=e.disabled)!=null?t:!1},{...g}=e,_={ref:n,onKeydown:B,onMousedown:i,onClick:a,id:o,role:"tab",type:c.value,"aria-controls":(f=v(l.panels.value[h.value]))==null?void 0:f.id,"aria-selected":d.value,tabIndex:d.value?0:-1,disabled:e.disabled?!0:void 0};return z({ourProps:_,theirProps:g,slot:x,attrs:u,slots:r,name:"Tab"})}}});const _e=P({__name:"HTabList",props:U({options:{}},{modelValue:{},modelModifiers:{}}),emits:U(["change"],["update:modelValue"]),setup(e,{emit:u}){const r=e,s=u,p=ue(e,"modelValue"),o=m({get(){return r.options.findIndex(n=>n.value===p.value)},set(n){p.value=r.options[n].value}});Y(p,n=>{n&&s("change",n)});function l(n){p.value=r.options[n].value}return(n,b)=>{const k=pe;return T(),D(E(Ie),{"selected-index":E(o),onChange:l},{default:O(()=>[oe(E(ke),{class:"inline-flex select-none items-center justify-center rounded-md bg-stone-1 p-1 ring-1 ring-stone-2 dark-bg-stone-9 dark-ring-stone-8"},{default:O(()=>[(T(!0),F(V,null,q(n.options,(h,d)=>(T(),D(E(we),{key:d,as:"template"},{default:O(({selected:S})=>[ie("button",{class:ve(["w-full inline-flex items-center justify-center gap-1 whitespace-nowrap border-size-0 rounded-md bg-inherit px-2 py-1.5 text-sm text-dark ring-stone-2 ring-inset dark-text-white focus-outline-none focus-ring-2 dark-ring-stone-8",{"cursor-default bg-white dark-bg-dark-9":S,"cursor-pointer opacity-50 hover-opacity-100":!S}])},[h.icon?(T(),D(k,{key:0,name:h.icon,class:"flex-shrink-0"},null,8,["name"])):de("",!0),ce(" "+J(h.label),1)],2)]),_:2},1024))),128))]),_:1})]),_:1},8,["selected-index"])}}}),Te=["disabled","onClick"],$e=P({__name:"HDropdownMenu",props:{items:{}},setup(e){const u=e,r=m(()=>u.items.map(s=>s.filter(p=>!p.hide)).filter(s=>s.length));return(s,p)=>{const o=be("VMenu");return T(),D(o,fe({"show-triggers":["hover"],"auto-hide":!1,"popper-triggers":["hover","click"],delay:200},s.$attrs),{popper:O(()=>[(T(!0),F(V,null,q(E(r),(l,n)=>(T(),F("div",{key:n,class:"b-b-1 b-b-stone-2 b-b-solid p-1 dark-b-b-1 dark-b-b-stone-7 last-b-b-size-0"},[(T(!0),F(V,null,q(l,(b,k)=>(T(),F("button",{key:k,disabled:b.disabled,class:"w-full flex cursor-pointer items-center gap-2 border-size-0 rounded-md bg-inherit px-2 py-1.5 text-sm text-dark disabled-cursor-not-allowed dark-text-white disabled-opacity-50 hover-not-disabled-bg-stone-1 dark-hover-not-disabled-bg-stone-9",onClick:b.handle},J(b.label),9,Te))),128))]))),128))]),default:O(()=>[me(s.$slots,"default")]),_:3},16)}}});export{$e as _,_e as a,xe as s};
