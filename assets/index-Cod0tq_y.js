
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-ChZ28WVx.js";import{e as P,C as q,D as G,f as D,G as T,o as C,c as y,A as Z,B as J,u as i,z as K,t as Q,y as U,a as h,w as tt}from"./index-mFYeOg6f.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as ot}from"./index.vue_vue_type_script_setup_true_lang-Buj60MwG.js";function L(t,e,o,l){return Number.parseFloat((e-l*e/t+o).toFixed(2))}function lt(t){[...t.querySelectorAll("*")].forEach(e=>t.removeChild(e))}function at(t){return t.value}function k(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in e)o.setAttribute(l,e[l]);return o}function st(t,e,o){if(lt(t),e.length<=1)return;o=o||{},typeof e[0]=="number"&&(e=e.map(s=>({value:s})));const l=o.onmousemove,a=o.onmouseout,f="interactive"in o?o.interactive:!!l,n=o.spotRadius||2,u=n*2,W=o.cursorWidth||2,$=Number.parseFloat(t.attributes["stroke-width"].value),B=o.fetch||at,b=e.map(s=>B(s)),M=Number.parseFloat(t.attributes.width.value)-u*2,w=Number.parseFloat(t.attributes.height.value),E=w-$*2-u,N=Math.max(...b),c=-1e3,F=b.length-1,V=M/F,m=[],I=L(N,E,$+n,b[0]);let g=`M${u} ${I}`;b.forEach((s,d)=>{const r=d*V+u,p=L(N,E,$+n,s);m.push(Object.assign({},e[d],{index:d,x:r,y:p})),g+=` L ${r} ${p}`});const X=k("path",{class:"sparkline--line",d:g,fill:"none"}),Y=`${g} V ${w} L ${u} ${w} Z`,z=k("path",{class:"sparkline--fill",d:Y,stroke:"none"});if(t.appendChild(z),t.appendChild(X),!f)return;const v=k("line",{class:"sparkline--cursor",x1:c,x2:c,y1:0,y2:w,"stroke-width":W}),x=k("circle",{class:"sparkline--spot",cx:c,cy:c,r:n});t.appendChild(v),t.appendChild(x);const S=k("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(S),S.addEventListener("mouseout",s=>{v.setAttribute("x1",c.toString()),v.setAttribute("x2",c.toString()),x.setAttribute("cx",c.toString()),a&&a(s)}),S.addEventListener("mousemove",s=>{const d=s.offsetX;let r=m.find(O=>O.x>=d);r||(r=m[F]);const p=m[m.indexOf(r)-1];let _,R;p?(R=p.x+(r.x-p.x)/2,_=d>=R?r:p):_=r;const A=_.x,H=_.y;x.setAttribute("cx",A),x.setAttribute("cy",H),v.setAttribute("x1",A),v.setAttribute("x2",A),l&&l(s,_)})}const nt={class:"sparkline"},rt=["width","height","stroke-width","stroke","fill"],it=P({name:"Sparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){q(a=>({43244542:a.cursorColor,"66a22754":a.spotColor}));const e=t,o=G("sparklineRef"),l=D({show:!1,content:"",top:0,left:0});return T(()=>{st(o.value,e.value,e.tooltip&&{onmousemove:(a,f)=>{l.value.show=!0,l.value.content=f.tooltip,l.value.top=a.offsetY,l.value.left=a.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(a,f)=>(C(),y("div",nt,[(C(),y("svg",{ref_key:"sparklineRef",ref:o,width:a.width,height:a.height,"stroke-width":a.strokeWidth,stroke:a.strokeColor,fill:a.fillColor},null,8,rt)),a.tooltip?Z((C(),y("span",{key:0,class:"tooltip",style:K([`left: ${i(l).left}px`,`top: ${i(l).top}px`])},Q(i(l).content),5)),[[J,i(l).show]]):U("",!0)]))}}),ut=et(it,[["__scopeId","data-v-00e5a4a3"]]),ht=P({__name:"index",setup(t){const e=D([1,5,2,4,8,3,7]),o=D([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,a)=>{const f=ot,n=ut,u=j;return C(),y("div",null,[h(f,{title:"迷你图",content:"Sparkline"}),h(u,null,{default:tt(()=>[h(n,{value:i(e)},null,8,["value"]),h(n,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),h(n,{value:i(o),tooltip:""},null,8,["value"]),h(n,{value:i(o),tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}}});export{ht as default};
