
/**
 * 由 One-step-admin 提供技术支持
 * Powered by One-step-admin
 * https://one-step-admin.hurui.me
 */
    
import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-ChZ28WVx.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-DjF5febJ.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-Buj60MwG.js";import{aF as V,e as B,f as $,D as j,G as se,E as R,r as d,W as A,A as H,u as o,o as g,c as S,a,w as l,m as F,n as ie,p as re,h as w,y as M,b as p,s as G,K as de,aG as me,t as ue,aH as pe,_ as fe}from"./index-mFYeOg6f.js";import{a as ce}from"./department-DVt24mP8.js";import{u as ge}from"./usePagination-Bo0a2Msc.js";import{u as _e}from"./useWindow-_VulymEv.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={list:i=>V.get("job/list",{params:i,baseURL:"/mock/"}),detail:i=>V.get("job/detail",{params:i,baseURL:"/mock/"}),create:i=>V.post("job/create",i,{baseURL:"/mock/"}),edit:i=>V.post("job/edit",i,{baseURL:"/mock/"}),delete:i=>V.post("job/delete",{id:i},{baseURL:"/mock/"})},T=B({__name:"index",props:{id:{default:""},departmentId:{default:""}},setup(i,{expose:b}){const m=i,k=$(!1),f=j("formRef"),r=$({id:m.id,department_id:m.departmentId,title:""}),z=$({title:[{required:!0,message:"请输入职位名称",trigger:"blur"}]});se(()=>{r.value.id!==""&&y()});function y(){k.value=!0,x.detail({department_id:r.value.department_id,id:r.value.id}).then(e=>{k.value=!1,r.value.title=e.data.title})}return b({submit(){return new Promise(e=>{var u;(u=f.value)==null||u.validate(n=>{n&&(r.value.id===""?x.create(r.value).then(()=>{R.success({message:"模拟新增成功",center:!0}),e()}):x.edit(r.value).then(()=>{R.success({message:"模拟编辑成功",center:!0}),e()}))})})}}),(e,u)=>{const n=d("ElInput"),v=d("ElFormItem"),E=d("ElForm"),D=A("loading");return H((g(),S("div",null,[a(E,{ref_key:"formRef",ref:f,model:o(r),rules:o(z),"label-width":"120px","label-suffix":"："},{default:l(()=>[a(v,{label:"职位",prop:"title"},{default:l(()=>[a(n,{modelValue:o(r).title,"onUpdate:modelValue":u[0]||(u[0]=C=>o(r).title=C),placeholder:"请输入职位名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[D,o(k)]])}}}),ve=B({__name:"index",props:F({mode:{},id:{},departmentId:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:F(["success"],["update:modelValue"]),setup(i,{emit:b}){const m=i,k=b,f=ie(i,"modelValue"),r=j("formRef"),z=re(()=>m.id===""?"新增职位":"编辑职位");function y(){var u;(u=r.value)==null||u.submit().then(()=>{k("success"),e()})}function e(){f.value=!1}return(u,n)=>{const v=d("ElButton"),E=d("ElDialog"),D=d("ElDrawer");return g(),S("div",null,[m.mode==="dialog"?(g(),w(E,{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=C=>f.value=C),title:o(z),width:"600px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:l(()=>[a(v,{size:"large",onClick:e},{default:l(()=>n[2]||(n[2]=[p(" 取 消 ")])),_:1}),a(v,{type:"primary",size:"large",onClick:y},{default:l(()=>n[3]||(n[3]=[p(" 确 定 ")])),_:1})]),default:l(()=>[a(T,G({ref_key:"formRef",ref:r},u.$props),null,16)]),_:1},8,["modelValue","title"])):m.mode==="drawer"?(g(),w(D,{key:1,modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=C=>f.value=C),title:o(z),size:"600px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[a(v,{size:"large",onClick:e},{default:l(()=>n[4]||(n[4]=[p(" 取 消 ")])),_:1}),a(v,{type:"primary",size:"large",onClick:y},{default:l(()=>n[5]||(n[5]=[p(" 确 定 ")])),_:1})]),default:l(()=>[a(T,G({ref_key:"formRef",ref:r},u.$props),null,16)]),_:1},8,["modelValue","title"])):M("",!0)])}}}),Ee=B({__name:"index",props:{params:{}},setup(i){const b=i,{pagination:m,getParams:k,onSizeChange:f,onCurrentChange:r,onSortChange:z}=ge(),y=_e(),e=$({loading:!1,tableAutoHeight:!0,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],department:""});de(()=>{var s;return(s=b.params)==null?void 0:s.department_id},()=>{u(),n()},{immediate:!0});function u(){var s;ce.detail((s=b.params)==null?void 0:s.department_id).then(t=>{e.value.department=t.data.title})}function n(){var t;e.value.loading=!0;const s={...k(),department_id:(t=b.params)==null?void 0:t.department_id,...e.value.search.title&&{title:e.value.search.title}};x.list(s).then(h=>{e.value.loading=!1,e.value.dataList=h.data.list,m.value.total=h.data.total})}function v(s){f(s).then(()=>n())}function E(s=1){r(s).then(()=>n())}function D({prop:s,order:t}){z(s,t).then(()=>n())}function C(){e.value.formModeProps.id="",e.value.formModeProps.visible=!0}function K(s){e.value.formModeProps.id=s.id,e.value.formModeProps.visible=!0}function N(s){pe.confirm(`确认删除「${s.title}」吗？`,"确认信息").then(()=>{x.delete(s.id).then(()=>{n(),R.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}return(s,t)=>{const h=fe,_=d("ElButton"),J=ne,W=d("ElInput"),U=d("ElFormItem"),q=d("ElForm"),O=le,Q=d("ElDivider"),X=d("ElButtonGroup"),Y=d("ElSpace"),I=d("ElTableColumn"),Z=d("ElTable"),ee=d("ElPagination"),te=ae,oe=A("loading");return g(),S("div",null,[a(J,{title:`「${o(e).department}」职位管理`,content:"页面数据为 Mock 示例数据，非真实数据。"},{default:l(()=>[a(_,{size:"default",round:"",onClick:t[0]||(t[0]=c=>{o(y).add("PagesExampleGeneralDepartment"),o(y).remove("PagesExampleGeneralDepartmentJob")})},{icon:l(()=>[a(h,{name:"i-ep:arrow-left"})]),default:l(()=>[t[7]||(t[7]=p(" 返回 "))]),_:1})]),_:1},8,["title"]),a(te,null,{default:l(()=>[a(O,{"show-toggle":!1},{default:l(({fold:c,toggle:L})=>[a(q,{model:o(e).search,size:"default","label-width":"100px","inline-message":"",inline:"",class:"search-form"},{default:l(()=>[a(U,{label:"职位"},{default:l(()=>[a(W,{modelValue:o(e).search.title,"onUpdate:modelValue":t[1]||(t[1]=P=>o(e).search.title=P),placeholder:"请输入职位名称，支持模糊查询",clearable:"",onKeydown:t[2]||(t[2]=me(P=>E(),["enter"])),onClear:t[3]||(t[3]=P=>E())},null,8,["modelValue"])]),_:1}),a(U,null,{default:l(()=>[a(_,{type:"primary",onClick:t[4]||(t[4]=P=>E())},{icon:l(()=>[a(h,{name:"i-ep:search"})]),default:l(()=>[t[8]||(t[8]=p(" 筛选 "))]),_:1}),a(_,{link:"",disabled:"",onClick:L},{icon:l(()=>[a(h,{name:c?"i-ep:caret-bottom":"i-ep:caret-top"},null,8,["name"])]),default:l(()=>[p(" "+ue(c?"展开":"收起"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:1}),a(Q,{"border-style":"dashed"}),a(Y,{wrap:""},{default:l(()=>[a(_,{type:"primary",size:"default",onClick:C},{icon:l(()=>[a(h,{name:"i-ep:plus"})]),default:l(()=>[t[9]||(t[9]=p(" 新增职位 "))]),_:1}),o(e).batch.enable?(g(),w(_,{key:0,size:"default",disabled:!o(e).batch.selectionDataList.length},{default:l(()=>t[10]||(t[10]=[p(" 单个批量操作按钮 ")])),_:1},8,["disabled"])):M("",!0),o(e).batch.enable?(g(),w(X,{key:1},{default:l(()=>[a(_,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:l(()=>t[11]||(t[11]=[p(" 批量操作按钮组1 ")])),_:1},8,["disabled"]),a(_,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:l(()=>t[12]||(t[12]=[p(" 批量操作按钮组2 ")])),_:1},8,["disabled"])]),_:1})):M("",!0)]),_:1}),H((g(),w(Z,{class:"my-4",data:o(e).dataList,stripe:"","highlight-current-row":"",border:"",height:"100%",onSortChange:D,onSelectionChange:t[5]||(t[5]=c=>o(e).batch.selectionDataList=c)},{default:l(()=>[o(e).batch.enable?(g(),w(I,{key:0,type:"selection",width:"40"})):M("",!0),a(I,{prop:"title",label:"职位"}),a(I,{label:"操作",width:"250",align:"center"},{default:l(c=>[a(_,{type:"primary",size:"small",plain:"",onClick:L=>K(c.row)},{default:l(()=>t[13]||(t[13]=[p(" 编辑 ")])),_:2},1032,["onClick"]),a(_,{type:"danger",size:"small",plain:"",onClick:L=>N(c.row)},{default:l(()=>t[14]||(t[14]=[p(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,o(e).loading]]),a(ee,{"current-page":o(m).page,total:o(m).total,"page-size":o(m).size,"page-sizes":o(m).sizes,layout:o(m).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:v,onCurrentChange:E},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),o(e).formMode==="dialog"||o(e).formMode==="drawer"?(g(),w(ve,{key:0,id:o(e).formModeProps.id,modelValue:o(e).formModeProps.visible,"onUpdate:modelValue":t[6]||(t[6]=c=>o(e).formModeProps.visible=c),"department-id":b.params.department_id,mode:o(e).formMode,onSuccess:n},null,8,["id","modelValue","department-id","mode"])):M("",!0)])}}}),Me=be(Ee,[["__scopeId","data-v-8b2c8a11"]]);export{Me as default};
